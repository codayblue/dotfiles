#!/bin/bash

if [[ $1 == "create" ]]; then
  kind create cluster --config=$HOME/.kube/kind.yaml;
  helm install calico projectcalico/tigera-operator --version v3.21.2 --kube-context=kind-local
  kubectl apply --context=kind-local -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/main/deploy/static/provider/kind/deploy.yaml;
fi

if [[ $1 == "destroy" ]]; then
  kind delete cluster --name=local;
fi